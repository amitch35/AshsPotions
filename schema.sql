create table
  public.global_inventory (
    id bigint generated by default as identity,
    created_at timestamp with time zone not null default (now() at time zone 'pst'::text),
    num_red_ml integer not null default 0,
    gold integer not null default 100,
    num_green_ml integer not null default 0,
    num_blue_ml integer not null default 0,
    num_dark_ml integer not null default 0,
    constraint global_inventory_pkey primary key (id)
  ) tablespace pg_default;

create table
  public.potions (
    id bigint generated by default as identity,
    sku text not null,
    name text null,
    price integer not null default 50,
    red integer not null default 0,
    green integer not null default 0,
    blue integer not null default 0,
    dark integer not null default 0,
    constraint potions_pkey primary key (id),
    constraint potions_sku_key unique (sku)
  ) tablespace pg_default;

create table
  public.potion_quantities (
    id bigint generated by default as identity,
    created_at timestamp with time zone not null default (now() at time zone 'pst'::text),
    potion_id bigint not null,
    delta integer not null default 0,
    constraint potion_quantities_pkey primary key (id),
    constraint potion_quantities_potion_id_fkey foreign key (potion_id) references potions (id) on update cascade on delete cascade
  ) tablespace pg_default;

create table
  public.shopping_carts (
    id bigint generated by default as identity,
    created_at timestamp with time zone not null default (now() at time zone 'pst'::text),
    customer text not null,
    constraint shopping_carts_pkey primary key (id)
  ) tablespace pg_default;

create table
  public.cart_contents (
    id bigint generated by default as identity,
    created_at timestamp with time zone not null default (now() at time zone 'pst'::text),
    cart_id bigint not null,
    potion_id bigint not null,
    quantity_requested integer not null,
    constraint cart_contents_pkey primary key (id),
    constraint cart_contents_cart_id_fkey foreign key (cart_id) references shopping_carts (id) on update cascade on delete cascade,
    constraint cart_contents_potion_id_fkey foreign key (potion_id) references potions (id)
  ) tablespace pg_default;

create table
  public.transactions (
    id bigint generated by default as identity,
    created_at timestamp with time zone not null default (now() at time zone 'pst'::text),
    cart_id bigint not null,
    success boolean not null,
    payment text not null,
    gold_paid integer not null,
    constraint transactions_pkey primary key (id),
    constraint transactions_cart_id_fkey foreign key (cart_id) references shopping_carts (id) on update cascade on delete cascade
  ) tablespace pg_default;